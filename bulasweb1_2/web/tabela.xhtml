<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Visualização de relação entre medicamentos em Tabela</title>
</head>
<body>
<ui:composition template="templates/modelo.xhtml">
	<ui:define name="content">
		<a4j:form>
			<div class="post">
			<h2 class="Title"><h:outputText value=""></h:outputText></h2>
			<div class="entry">
			
			<h:panelGrid columns="2">
				<h:outputText value="Sintomas:">
					<rich:toolTip value="Digite os sintomas"></rich:toolTip>
				</h:outputText>
				<h:inputText id="sintomas" value="#{TabelaDTO.sintomas}" />
                                
				<h:outputText value="Doenças:">
					
				</h:outputText>
                                
                                
				<h:inputText id="doencas" value="#{TabelaDTO.doencas}" ><rich:toolTip><span>
                                        Digite as doenças que você possui.
                                    </span>
                                </rich:toolTip>
                                </h:inputText>

				<h:outputText value="Alergênicos:">
					<rich:toolTip>Digite os remédios ou substâncias aos quais você é alérgico</rich:toolTip>
				</h:outputText>
				<h:inputText id="alergenicos" value="#{TabelaDTO.alergenicos}" />
				
				<h:outputText value="Fármacos:">
					<rich:toolTip>Digite os remédios ou substâncias que você está utilizando</rich:toolTip>
				</h:outputText>
                                <h:inputText id="farmacos" value="#{TabelaDTO.farmacos}" />
				
				<rich:spacer></rich:spacer>
				<a4j:commandLink action="#{TabelaControle.buscar}"
					  reRender="tabela">
					<h:graphicImage value="/resources/css/images/busca.jpg"></h:graphicImage>
				</a4j:commandLink>
			</h:panelGrid>

<!--			<rich:dataTable id="tabela" value="#{TabelaDTO.results }" var="record">-->
<!--				<f:facet name="header">-->
<!--					<rich:columns value="#{TabelaDTO.medicamentos}" var="m">-->
<!--						<h:outputText value="#{m.nome}"></h:outputText>-->
<!--					</rich:columns>-->
<!--				</f:facet>-->
<!--			-->
<!--				<rich:column style="background-color: #{record.firstColumn.backgroundColor};">-->
<!--					<h:outputText value="#{record.firstColumn.nome}"></h:outputText>-->
<!--				</rich:column>-->
<!--			-->
<!--				<rich:columns value="#{record.otherColumns}" var="column">-->
<!--					<h:outputText style="background-color: #{column.backgroundColor}"-->
<!--						value="#{column.nome}" />-->
<!--				</rich:columns>-->
<!--				-->
<!--			</rich:dataTable>-->



<!--			<rich:panel id="tabela" bodyClass="rich-laguna-panel-no-header">-->
<!--				<script>-->
<!--					function a(s) {-->
<!--						document.getElementById('tabela1').innerHTML = s;-->
<!--					}-->
<!--				</script>-->
<!--						-->
<!--				<a4j:support event="onchange" oncomplete="a(#{TabelaDTO.tableHtml})">-->
<!--				</a4j:support>-->
<!--			-->
<!--				<div id="tabela1" >-->
<!--				</div>			-->
<!--   			</rich:panel>-->

<!--				<h:dataTable>-->
<!--				</h:dataTable>-->

<style>
.vertical_text {
vertical-align: bottom;
max-width: 24px;
min-height: 120px;
height: 160px;
border-width: 1;
border: solid;
writing-mode: tb-rl;
}	
</style>
				<rich:panel id="tabela" bodyClass="rich-laguna-panel-no-header">
				
				
				<table style="border-width: 1; border: solid;">
					<tr>
						<th></th>
					<ui:repeat value="#{TabelaDTO.medicamentos}" var="med" >
						<th class="vertical_text"><nobr><h:outputText value="#{med.nome}" /></nobr></th>						
					</ui:repeat>
					</tr>
				
					<ui:repeat value="#{TabelaDTO.results }" var="record">
					<tr>
						<td style="background-color: #{record.firstColumn.backgroundColor};">
							<h:outputText value="#{record.firstColumn.nome}"></h:outputText>
						</td>

						<ui:repeat value="#{record.otherColumns}" var="column">
							<td style="background-color: #{column.backgroundColor}">
							<h:outputText value="#{column.nome}" />
							</td>
						</ui:repeat>
					</tr>
					</ui:repeat>			
				</table>

<!--				<h:outputText value="#{TabelaDTO.tableHtml}" escape="false"></h:outputText>-->

				</rich:panel>

			</div>
			</div>
		</a4j:form>
	</ui:define>
</ui:composition>
</body>
</html>